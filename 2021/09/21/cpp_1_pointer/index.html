<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>C++中的指针和地址 | Iyui的博客</title><meta name="keywords" content="c++"><meta name="author" content="Iyui"><meta name="copyright" content="Iyui"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="地址和指针通过&amp;获取地址:12345678#include &lt;iostream&gt;using namespace std;int main()&amp;#123;    int i &#x3D; 1;    cout&lt;&lt;&amp;i&lt;&lt;endl;&#x2F;&#x2F;通过操作符&amp;获取i在内存中的地址,然后输出在屏幕上    return 0;&amp;#125;输出00000060464FF"><meta property="og:type" content="article"><meta property="og:title" content="C++中的指针和地址"><meta property="og:url" content="http://iyui.github.io/2021/09/21/cpp_1_pointer/index.html"><meta property="og:site_name" content="Iyui的博客"><meta property="og:description" content="地址和指针通过&amp;获取地址:12345678#include &lt;iostream&gt;using namespace std;int main()&amp;#123;    int i &#x3D; 1;    cout&lt;&lt;&amp;i&lt;&lt;endl;&#x2F;&#x2F;通过操作符&amp;获取i在内存中的地址,然后输出在屏幕上    return 0;&amp;#125;输出00000060464FF"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/npm/ushio-api-img-moe@5.0.3/img_38_2795x1200_93.9799957275391_null_normal.jpg"><meta property="article:published_time" content="2021-09-20T16:00:00.000Z"><meta property="article:modified_time" content="2021-11-07T06:25:47.126Z"><meta property="article:author" content="Iyui"><meta property="article:tag" content="c++"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/ushio-api-img-moe@5.0.3/img_38_2795x1200_93.9799957275391_null_normal.jpg"><link rel="shortcut icon" href="/img/sakura.ico"><link rel="canonical" href="http://iyui.github.io/2021/09/21/cpp_1_pointer/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"C++中的指针和地址",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!1,postUpdate:"2021-11-07 14:25:47"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("global-font-size");void 0!==o&&document.documentElement.style.setProperty("--global-font-size",o+"px");GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/iyui.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.min.css" media="defer" onload='this.media="all"'><script async src="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/carousel-touch.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-calendar-alt"></i> <span>时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/npm/ushio-api-img-moe@5.0.3/img_38_2795x1200_93.9799957275391_null_normal.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Iyui的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-calendar-alt"></i> <span>时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">C++中的指针和地址</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2021-09-20T16:00:00.000Z" title="undefined 2021-09-21 00:00:00">2021-09-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="C++中的指针和地址"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout hide-aside" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="地址和指针"><a href="#地址和指针" class="headerlink" title="地址和指针"></a>地址和指针</h1><p>通过<code>&amp;</code>获取地址:<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    cout&lt;&lt;&amp;i&lt;&lt;endl;<span class="comment">//通过操作符&amp;获取i在内存中的地址,然后输出在屏幕上</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>输出<code>00000060464FF574</code><p></p><p>指针就是用来保存内存地址的变量,每个被定义的变量都有自己的地址,因此可以使用指针来存放任何已被定义的变量的地址,即使没有被赋值</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a;<span class="comment">//定义一个变量a</span></span><br><span class="line"><span class="keyword">int</span> *p;<span class="comment">//定义一个指针p</span></span><br><span class="line">p=&amp;a;<span class="comment">//将变量a的地址取出,赋给变量p,这样变量p保存的就是变量a的地址</span></span><br><span class="line">cout&lt;&lt;&amp;a&lt;&lt;endl;<span class="comment">//输出a的地址</span></span><br><span class="line">cout&lt;&lt;p&lt;&lt;endl;<span class="comment">//输出变量p的值,也即是a的地址</span></span><br></pre></td></tr></table></figure><p>输出:<br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">00000086EA92F784</span><br><span class="line">00000086EA92F784</span><br></pre></td></tr></table></figure><p></p><h2 id="常量指针"><a href="#常量指针" class="headerlink" title="常量指针"></a>常量指针</h2><p><code>int *const p;//指针只能初始化,不可改变,但可以改变其指向的整数</code></p><h2 id="指向常量的指针"><a href="#指向常量的指针" class="headerlink" title="指向常量的指针"></a>指向常量的指针</h2><p><code>const int *p;指向的整数不可修改,指针可以被修改</code></p><h2 id="指向常量的常指针"><a href="#指向常量的常指针" class="headerlink" title="指向常量的常指针"></a>指向常量的常指针</h2><p><code>const int * const p;//不解释</code></p><h2 id="空指针"><a href="#空指针" class="headerlink" title="空指针"></a>空指针</h2><p>void * 可以指向任何类型对象的地址，表示这是一个指针，和地址值有关，但不知道存储在此地址上的对象的类型，所以在取空类型指针所指向的值的时候，应将空类型指针转换为对应的指针类型</p><h3 id="空指针支持的操作"><a href="#空指针支持的操作" class="headerlink" title="空指针支持的操作"></a>空指针支持的操作</h3><ul><li><p>与另一个指针比较</p></li><li><p>向函数传递void *指针</p></li><li><p>在函数里返回void *指针</p></li><li><p>给另一个void *指针赋值</p></li></ul><h3 id="空指针不支持的操作"><a href="#空指针不支持的操作" class="headerlink" title="空指针不支持的操作"></a>空指针不支持的操作</h3><ul><li><p>不支持解引用，不能获取指向对象的值</p></li><li><p>不能进行指针运算，比如移位操作</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a = <span class="number">3.14</span>;</span><br><span class="line">	<span class="keyword">double</span> *p1 = &amp;a;</span><br><span class="line">	<span class="keyword">void</span> *p2 = &amp;a;                 <span class="comment">//正确，将一个double型数据的地址赋给一个空类型指针</span></span><br><span class="line">	<span class="keyword">void</span> *p3 = p1;                 <span class="comment">//正确，将一个double型指针赋给一个空类型指针</span></span><br><span class="line"> </span><br><span class="line">	<span class="comment">//double b = *p2;              //错误，无法对一个空类型指针解引用</span></span><br><span class="line">	<span class="keyword">double</span> d = *((<span class="keyword">double</span>*)p2);     <span class="comment">//正确，先将空类型指针强转为double型指针，然后再解引用</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>, d);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">int</span> array[<span class="number">5</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;;</span><br><span class="line">	<span class="keyword">void</span> *p4 = array;</span><br><span class="line">	<span class="comment">//for (int i = 0; i &lt; 5; i++)</span></span><br><span class="line">	<span class="comment">//&#123;</span></span><br><span class="line">	<span class="comment">//	printf(&quot;%d  &quot;, *(p4 + i)); //错误，不能对空类型指针进行移位操作</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"> </span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d  &quot;</span>, *((<span class="keyword">int</span>*)p4 + i));   <span class="comment">//正确，先将空类型指针强转为int型指针，然后再解引用</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"> </span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="野指针"><a href="#野指针" class="headerlink" title="野指针"></a>野指针</h2><p>指针p被free或者delete之后，只是把指针所指的内存释放掉了，没有改变指针的值或没有置为NULL，此时，p沦落为野指针<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str1[] = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> str2[] = <span class="string">&quot;world&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> *pd = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line"><span class="built_in">strcpy</span>(pd, str1);         <span class="comment">//正确，将字符串str1复制到指定的内存中去</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pd);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, pd);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">free</span>(pd);</span><br><span class="line"><span class="keyword">if</span> (pd != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">strcpy</span>(pd, str2);    <span class="comment">//错误，将字符串str2放到没有经过系统指定的内存中去</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pd);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, pd);</span><br></pre></td></tr></table></figure><p></p><h2 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h2><p>this是一个 const 指针，是所有成员函数的隐含参数。因此，在成员函数内部，它可以用来指向调用对象。</p><ul><li><p>this只能在成员函数中使用<br>成员函数默认第一个参数为T* const register this。<br>（友元函数，全局函数不是成员函数）</p></li><li><p>this指针不能再静态函数中使用<br>静态函数如同静态变量一样，他不属于具体的哪一个对象，静态函数表示了整个类范围意义上的信息，而this指针却实实在在的对应一个对象，所以this指针不能被静态函数使用。</p></li><li><p>this指针的创建<br>this指针在成员函数的开始执行前构造的，在成员的执行结束后清除。</p></li><li><p>this指针只有在成员函数中才有定义。<br>创建一个对象后，不能通过对象使用this指针。也无法知道一个对象的this指针的位置（只有在成员函数里才有this指针的位置）。当然，在成员函数里，你是可以知道this指针的位置的（可以&amp;this获得)，也可以直接使用的。</p></li></ul><hr><h1 id="栈和堆"><a href="#栈和堆" class="headerlink" title="栈和堆"></a>栈和堆</h1><h2 id="数据在内存中的存放形式"><a href="#数据在内存中的存放形式" class="headerlink" title="数据在内存中的存放形式"></a>数据在内存中的存放形式</h2><ul><li>栈区(stack):由编译器自动分配并释放,该区域一般存放函数的参数值,局部变量的值等</li><li>堆区(heap):一般由程序员分配释放,若程序员不释放,程序结束时<code>可能</code>由操作系统回收</li><li>寄存器区:用来保存栈顶指针和指令指针</li><li>全局区(静态区)(static):全局变量和静态变量的存储是放在一块的,初始化的全局变量和静态变量在一块区域,未初始化的全局变量和未初始化的静态变量在相邻的另一块区域.程序结束后由系统释放</li><li>文字常量区:常量字符串存储在此,程序结束后由系统释放</li><li>程序代码区:存放函数体的二进制代码</li></ul><h2 id="堆和栈的不同之处"><a href="#堆和栈的不同之处" class="headerlink" title="堆和栈的不同之处"></a>堆和栈的不同之处</h2><ul><li>内存申请的方式不同</li><li>系统响应的不同</li><li>空间大小的不同</li><li>执行效率的不同</li><li>执行函数时的不同</li></ul><p>栈内存小,效率高,存储的数据仅在函数内有效</p><p>堆的可存储空间可以非常大,但容易产生内存碎片,效率低,但灵活性高(堆是不连续的内存区域,各块区域由链表串联起来)</p><hr><h1 id="指针和堆"><a href="#指针和堆" class="headerlink" title="指针和堆"></a>指针和堆</h1><h2 id="用指针创建堆中空间"><a href="#用指针创建堆中空间" class="headerlink" title="用指针创建堆中空间"></a>用指针创建堆中空间</h2><p>堆中的每个内存单元都是匿名的,因此必须先在堆中申请一个内存单元的地址,然后把它保存在一个指针中,这样,只有使用该指针才可以访问到该内存单元的数据,这样可以避免一些试图修改它的非法操作</p><p>为此,首先创建一个堆,然后定义一个指向该堆的指针,在c++中使用关键字new创建一个堆并分配内存,在new后面跟一个要分配的对象类型,编译器根据这个类型来分配内存</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p;<span class="comment">//定义了一个指向整型的指针变量p</span></span><br><span class="line">p = <span class="keyword">new</span> <span class="keyword">int</span>;<span class="comment">//用new在堆中创建一个int类型的内存区域,然后将该区域的内存地址赋给指针变量p,这样p所指向的就是这块新建的内存区域</span></span><br><span class="line">*p = <span class="number">4</span>;<span class="comment">//将4赋给该存储区</span></span><br><span class="line">cout&lt;&lt;*p;<span class="comment">//输出该存储区中保存的数据4</span></span><br></pre></td></tr></table></figure><h2 id="用指针删除堆中空间"><a href="#用指针删除堆中空间" class="headerlink" title="用指针删除堆中空间"></a>用指针删除堆中空间</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">delete</span> p;<span class="comment">//删除指针指向的内存区域</span></span><br><span class="line">p = <span class="number">0</span>;<span class="comment">//防止出现野指针</span></span><br></pre></td></tr></table></figure><hr><h1 id="动态内存"><a href="#动态内存" class="headerlink" title="动态内存"></a>动态内存</h1><h2 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h2><p>假如没有删除一个指针就对其重新赋值,如</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br></pre></td></tr></table></figure><p>就会造成内存泄漏,因为指针p一开始指向了一块内存空间,之后又将一块新的内存空间地址赋给了p,这样一开始那块内存空间就无法使用了,因为指向它的指针已经指向了另一块空间</p><p>正确操作:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line">p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br></pre></td></tr></table></figure><h2 id="访问堆中的数据成员"><a href="#访问堆中的数据成员" class="headerlink" title="访问堆中的数据成员"></a>访问堆中的数据成员</h2><p>假如要访问对象的数据成员和函数,我们使用成员运算符<code>.</code><br>如<code>a.get();</code></p><p>假如是在堆中创建的对象,而该对象的内存地址保存在指针变量p中,那么就是:<br><code>(*p).get();</code><br>使用括号是为了保证先使用<code>*</code>号读取p的内存地址,然后再使用成员运算符<code>.</code>来访问成员函数<code>get()</code><br>而C++专门为用指针来间接访问对象的成员设置了一个运算符<code>-&gt;</code>,利用该符号可以实现读取对象的内存地址并访问该对象的成员的作用<br><code>p-&gt;get();</code></p><hr><h1 id="指针运算"><a href="#指针运算" class="headerlink" title="指针运算"></a>指针运算</h1><h2 id="指针的加减运算"><a href="#指针的加减运算" class="headerlink" title="指针的加减运算"></a>指针的加减运算</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">p++;<span class="comment">//内存地址自加,由于p指向的是int型变量,因此执行加1操作,会将原来的内存地址增加4个字节</span></span><br><span class="line">p--;<span class="comment">//内存地址自减,由于...</span></span><br></pre></td></tr></table></figure><p>示例:<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* p;</span><br><span class="line">    p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">    cout &lt;&lt; p &lt;&lt; endl;<span class="comment">//000002013A5865D0</span></span><br><span class="line">    cout &lt;&lt; ++p &lt;&lt; endl;<span class="comment">//000002013A5865D4</span></span><br><span class="line">    cout &lt;&lt; --p &lt;&lt; endl;<span class="comment">//000002013A5865D0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h2 id="指针的赋值运算"><a href="#指针的赋值运算" class="headerlink" title="指针的赋值运算"></a>指针的赋值运算</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">int</span> *p1 = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">cout &lt;&lt; p &lt;&lt; endl;<span class="comment">//000002CBB35865D0</span></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; endl;<span class="comment">//000002CBB3585380</span></span><br><span class="line">p=p1;</span><br><span class="line">cout &lt;&lt; p &lt;&lt; endl;<span class="comment">//000002CBB3585380</span></span><br></pre></td></tr></table></figure><h2 id="指针的相减运算"><a href="#指针的相减运算" class="headerlink" title="指针的相减运算"></a>指针的相减运算</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">int</span> *p1 = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">cout &lt;&lt; p &lt;&lt; endl;<span class="comment">//00000233D1D765D0</span></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; endl;<span class="comment">//00000233D1D7F300</span></span><br><span class="line">cout &lt;&lt; p-p1 &lt;&lt; endl;<span class="comment">//-9036(两块内存的地址差)</span></span><br></pre></td></tr></table></figure><h2 id="指针的比较运算"><a href="#指针的比较运算" class="headerlink" title="指针的比较运算"></a>指针的比较运算</h2><p>内存地址大小的比较</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if(p&lt;p1)</span><br><span class="line">return ;</span><br></pre></td></tr></table></figure><p>具体代码略</p><hr><h1 id="为什么使用指针"><a href="#为什么使用指针" class="headerlink" title="为什么使用指针"></a>为什么使用指针</h1><p>在操作大型数据和类时,由于指针可以通过内存地址直接访问数据,可避免在程序中复制大量的代码,因此指针的效率高</p><ul><li>处理堆中存放的大型数据</li><li>快速访问类的成员数据和函数</li><li>以别名的方式向函数传递参数</li></ul></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">Iyui</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="http://iyui.github.io/2021/09/21/cpp_1_pointer/">http://iyui.github.io/2021/09/21/cpp_1_pointer/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://iyui.github.io" target="_blank">Iyui的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/c/">c++</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/ushio-api-img-moe@5.0.3/img_38_2795x1200_93.9799957275391_null_normal.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Iyui</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.2},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""],insertScript:[200,()=>{document.querySelectorAll("mjx-container:not([display])").forEach(t=>{const e=t.parentNode;"li"===e.nodeName.toLowerCase()?e.parentNode.classList.add("has-jax"):e.classList.add("has-jax")})},"",!1]}}};const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script></body></html>